<div class="panel panel-default filter-panel" data-id="{{id}}">
  <div class="panel-heading ui-sortable-handle">
    <h4 class="panel-title" data-toggle="collapse" data-parent="#filter-accordion" data-target="#collapse-{{id}}">
      <div class="screen-reorder-handle">
        <i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i>
      </div>
      <span class="panel-title-text">
        <span class="column">{{columnLabel}}</span>
      </span>
      <span class="fa fa-chevron-{{#if fromLoading}}down{{else}}up{{/if}} panel-chevron"></span>
    </h4>
    <a href="#"><span class="icon-delete fa fa-trash"></span></a>
  </div>
  <div id="collapse-{{id}}" class="panel-collapse collapse {{#unless fromLoading}}in{{/unless}}">
    <div class="panel-body">

      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label>Data field</label>
        </div>
        <div class="col-sm-8">
          <label for="select-data-field-{{id}}" class="select-proxy-display">
            <select name="select-data-field-{{id}}" id="select-data-field-{{id}}" data-field="field" data-label="-- Select a data field" class="hidden-select form-control">
              <option value="none">-- Select a data field</option>
              {{#each columns}}
              <option value="{{this}}">{{this}}</option>
              {{/each}}
            </select>
            <span class="icon fa fa-chevron-down"></span>
            <span class="select-value-proxy">-- Please wait</span>
          </label>
        </div>
      </div>

      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label>Logic</label>
        </div>
        <div class="col-sm-8">
          <label for="logic-field-{{id}}" class="select-proxy-display">
            <select name="logic-field-{{id}}" id="logic-field-{{id}}" filter-item-id="{{id}}" data-field="logic" data-label="-- Select an option" class="hidden-select form-control">
              <optgroup>
                <option value="empty">Is empty</option>
                <option value="notempty">Is not empty</option>
                <option value="==" selected>Equals</option>
                <option value="!=">Doesn't equal</option>
                <option value="oneof">Is one of</option>
              </optgroup>
              <optgroup label="Text">
                <option value="contains">Text contains</option>
                <option value="notcontain">Text doesn't contain</option>
                <option value="regex">Text matches regex</option>
              </optgroup>
              <optgroup label="Number">
                <option value=">">Is greater than</option>
                <option value=">=">Is greater or equal to</option>
                <option value="<">Is less than</option>
                <option value="<=">Is less or equal to</option>
                <option value="between">Is between</option>
              </optgroup>
              <optgroup label="Date">
                <option value="dateis">Date is</option>
                <option value="datebefore">Date is before</option>
                <option value="dateafter">Date is after</option>
                <option value="datebetween">Date is between</option>
              </optgroup>
            </select>
            <span class="icon fa fa-chevron-down"></span>
          </label>
        </div>
      </div>

      <div id="date-logic-{{id}}">
        <div class="form-group clearfix">
          <div class="col-sm-4 control-label">
            <label>Date</label>
          </div>
          <div class="col-sm-8">
            <label for="date-field-{{id}}" class="select-proxy-display">
              <select name="date-field-{{id}}" id="date-field-{{id}}" data-field="date" filter-item-id="{{id}}" class="hidden-select form-control">
                <optgroup>
                  <option value="today">Current date (Today)</option>
                  <option value="now">Current date &amp; time (Now)</option>
                </optgroup>
                <optgroup label="&mdash;">
                  <option value="nowaddminutes">Now + number of minutes</option>
                  <option value="nowaddhours">Now + number of hours</option>
                  <option value="todayadddays">Today + number of days</option>
                  <option value="todayaddmonths">Today + number of months</option>
                  <option value="todayaddyears">Today + number of years</option>
                </optgroup>
                <optgroup label="&mdash;">
                  <option value="nowsubtractminutes">Now - number of minutes</option>
                  <option value="nowsubtracthours">Now - number of hours</option>
                  <option value="todayminusdays">Today - number of days</option>
                  <option value="todayminusmonths">Today - number of months</option>
                  <option value="todayminusyears">Today - number of years</option>
                </optgroup>
              </select>
              <span class="icon fa fa-chevron-down"></span>
            </label>
            <div class="checkbox checkbox-icon hidden">
              <input type="checkbox" id="enable-timezone-default-{{id}}">
              <label for="enable-timezone-default-{{id}}">
                <span class="check"><i class="fa fa-check"></i></span> Compare using device timezone
              </label>
            </div>
          </div>
        </div>

        <div class="form-group clearfix hidden" id="date-number-default-{{id}}">
          <div class="col-sm-4 control-label">
            <label for="number-field-{{id}}">Number</label>
          </div>
          <div class="col-sm-8">
            <input type="text" placeholder="Enter positive integer" name="number-field-{{id}}" id="number-field-{{id}}" data-field="number" class="form-control">
          </div>
        </div>
      </div>

      <div class="form-group clearfix" id="filter-value-type-{{id}}">
        <div class="col-sm-4 control-label">
          <label>Value type</label>
        </div>
        <div class="col-sm-8">
          <label for="value-type-field-{{id}}" class="select-proxy-display">
            <select name="value-type-field-{{id}}" id="value-type-field-{{id}}" data-field="valueType" filter-item-id="{{id}}" class="hidden-select form-control">
              <option value="enter-value">Enter a value</option>
              <option value="user-profile-data">User profile data</option>
              <option value="link-query-parameter">Link query parameter</option>
              <option value="app-storage-data">App storage data</option>
            </select>
            <span class="icon fa fa-chevron-down"></span>
          </label>
        </div>
      </div>

      <div class="form-group clearfix" id="filter-value-{{id}}">
        <div class="col-sm-4 control-label">
          <label for="value-field-{{id}}">Value</label>
        </div>
        <div class="col-sm-8">
          <input type="text" name="value-field-{{id}}" id="value-field-{{id}}" data-field="value" class="form-control">
        </div>
      </div>
    </div>

    <div id="logic-comparison-{{id}}">
      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label>Value type (from)</label>
        </div>
        <div class="col-sm-8">
          <label for="value-type-field-{{id}}" class="select-proxy-display">
            <select name="value-type-field-{{id}}" id="value-type-field-from-{{id}}" data-field="valueType" class="hidden-select form-control">
              <option value="enter-value">Enter a value</option>
              <option value="user-profile-data">User profile data</option>
              <option value="link-query-parameter">Link query parameter</option>
              <option value="app-storage-data">App storage data</option>
            </select>
            <span class="icon fa fa-chevron-down"></span>
          </label>
        </div>
      </div>

      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label for="value-field-{{id}}">Value (from)</label>
        </div>
        <div class="col-sm-8">
          <input type="text" name="value-field-from-{{id}}" id="value-field-from-{{id}}" data-field="value" class="form-control">
        </div>
      </div>
      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label>Value type (to)</label>
        </div>
        <div class="col-sm-8">
          <label for="value-type-field-{{id}}" class="select-proxy-display">
            <select name="value-type-field-{{id}}" id="value-type-field-to-{{id}}" data-field="valueType" class="hidden-select form-control">
              <option value="enter-value">Enter a value</option>
              <option value="user-profile-data">User profile data</option>
              <option value="link-query-parameter">Link query parameter</option>
              <option value="app-storage-data">App storage data</option>
            </select>
            <span class="icon fa fa-chevron-down"></span>
          </label>
        </div>
      </div>

      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label for="value-field-{{id}}">Value (to)</label>
        </div>
        <div class="col-sm-8">
          <input type="text" name="value-field-{{id}}" id="value-field-to-{{id}}" data-field="value" class="form-control">
        </div>
      </div>

    </div>

    <div id="date-between-{{id}}">
      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label>From date</label>
        </div>
        <div class="col-sm-8">
          <label for="date-from-{{id}}" class="select-proxy-display">
            <select name="date-from-{{id}}" id="date-from-{{id}}" data-field="date-from" filter-item-id="{{id}}" class="hidden-select form-control">
              <optgroup>
                <option value="today">Current date (Today)</option>
                <option value="now">Current date &amp; time (Now)</option>
              </optgroup>
              <optgroup label="&mdash;">
                <option value="nowaddminutes">Now + number of minutes</option>
                <option value="nowaddhours">Now + number of hours</option>
                <option value="todayadddays">Today + number of days</option>
                <option value="todayaddmonths">Today + number of months</option>
                <option value="todayaddyears">Today + number of years</option>
              </optgroup>
              <optgroup label="&mdash;">
                <option value="nowsubtractminutes">Now - number of minutes</option>
                <option value="nowsubtracthours">Now - number of hours</option>
                <option value="todayminusdays">Today - number of days</option>
                <option value="todayminusmonths">Today - number of months</option>
                <option value="todayminusyears">Today - number of years</option>
              </optgroup>
            </select>
            <span class="icon fa fa-chevron-down"></span>
          </label>
          <div class="checkbox checkbox-icon hidden">
            <input type="checkbox" id="enable-timezone-from-{{id}}">
            <label for="enable-timezone-from-{{id}}">
              <span class="check"><i class="fa fa-check"></i></span> Compare using device timezone
            </label>
          </div>
        </div>
      </div>

      <div class="form-group clearfix hidden" id="date-number-from-{{id}}">
        <div class="col-sm-4 control-label">
          <label for="number-field-{{id}}">Number</label>
        </div>
        <div class="col-sm-8">
          <input type="text" placeholder="Enter positive integer" name="number-field-from-{{id}}" id="number-field-from-{{id}}" data-field="number" class="form-control">
        </div>
      </div>

      <div class="form-group clearfix">
        <div class="col-sm-4 control-label">
          <label>To date</label>
        </div>
        <div class="col-sm-8">
          <label for="date-to-{{id}}" class="select-proxy-display">
            <select name="date-to-{{id}}" id="date-to-{{id}}" data-field="date-to" filter-item-id="{{id}}" class="hidden-select form-control">
              <optgroup>
                <option value="today">Current date (Today)</option>
                <option value="now">Current date &amp; time (Now)</option>
              </optgroup>
              <optgroup label="&mdash;">
                <option value="nowaddminutes">Now + number of minutes</option>
                <option value="nowaddhours">Now + number of hours</option>
                <option value="todayadddays">Today + number of days</option>
                <option value="todayaddmonths">Today + number of months</option>
                <option value="todayaddyears">Today + number of years</option>
              </optgroup>
              <optgroup label="&mdash;">
                <option value="nowsubtractminutes">Now - number of minutes</option>
                <option value="nowsubtracthours">Now - number of hours</option>
                <option value="todayminusdays">Today - number of days</option>
                <option value="todayminusmonths">Today - number of months</option>
                <option value="todayminusyears">Today - number of years</option>
              </optgroup>
            </select>
            <span class="icon fa fa-chevron-down"></span>
          </label>
          <div class="checkbox checkbox-icon hidden">
            <input type="checkbox" id="enable-timezone-to-{{id}}">
            <label for="enable-timezone-to-{{id}}">
              <span class="check"><i class="fa fa-check"></i></span> Compare using device timezone
            </label>
          </div>
        </div>
      </div>

      <div class="form-group clearfix hidden" id="date-number-to-{{id}}">
        <div class="col-sm-4 control-label">
          <label for="number-field-{{id}}">Number</label>
        </div>
        <div class="col-sm-8">
          <input type="text" placeholder="Enter positive integer" name="number-field-to-{{id}}" id="number-field-to-{{id}}" data-field="number" class="form-control">
        </div>
      </div>
    </div>
  </div>
</div>