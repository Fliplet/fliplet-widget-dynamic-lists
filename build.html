<script type="text/javascript">
  var DynamicListFuncs = DynamicListFuncs || {};
  var dynamicLists = dynamicLists || {};
</script>
{{#if layout}}
  {{#if advancedSettings.cssEnabled}}
  <style>
  {{{advancedSettings.cssCode}}}
  </style>
  {{/if}}
  <div data-dynamic-lists-1-3-0-id="{{ id }}" data-dynamic-lists-layout="{{ layout }}" data-dynamic-lists-uuid="{{uuid}}"></div>
  {{#if advancedSettings.jsEnabled}}
  <script type="text/javascript">
    Fliplet().then(function () {
      var id = {{ id }};
      var data = Fliplet.Widget.getData(id);

      try {
        {{{ advancedSettings.jsCode }}}
      } catch (e) {
        console.log('Error with custom JS code', e);
      }
      var DynamicList = Fliplet.Registry.get('dynamic-list:1.3.0:{{ layout }}:{{ uuid }}');
      if (typeof DynamicList === 'function') {
        DynamicListFuncs[id] = DynamicList;
        DynamicList = null;
        dynamicLists[id] = new DynamicListFuncs[id](id, data);
      }
    });
  </script>
  {{/if}}
{{else}}
<div class="dynamic-list-placeholder">
  <h3>List (from data source)</h3>
  <p>Click here to edit the settings.</p>
</div>
{{/if}}